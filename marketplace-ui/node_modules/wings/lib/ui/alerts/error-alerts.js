'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _alert = require('./alert');

var _alert2 = _interopRequireDefault(_alert);

var _autoScroll = require('../common/auto-scroll');

var _autoScroll2 = _interopRequireDefault(_autoScroll);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function parseError(err) {
  if (!err) return null;

  return _lodash2.default.get(err, ['responseJson', 'errors'], [err.toString()]);
}

var ErrorAlerts = function ErrorAlerts(props) {
  var errors = props.errors || parseError(props.error);

  if (errors && errors.length) {
    return _react2.default.createElement(
      'div',
      { className: 'fc-errors' },
      _react2.default.createElement(_autoScroll2.default, null),
      errors.map(function (error, index) {
        // $FlowFixMe: ternary operator flow, do you hear it ?
        var closeAction = props.closeAction ? function () {
          return props.closeAction(error, index);
        } : null;

        return _react2.default.createElement(
          _alert2.default,
          {
            key: 'error-' + error + '-' + index,
            type: _alert2.default.ERROR,
            closeAction: closeAction },
          error
        );
      })
    );
  }

  return null;
};

exports.default = ErrorAlerts;