---

- include_vars: aws.yml

- name: Create directory for the seeder data
  file: path="{{product_seeder_dir}}" owner="{{user}}" state=directory mode="u=rwx,g=rwx,o=r"
  become: true

- name: Pull listing.json
  s3:
    aws_access_key: "{{aws_access_key}}"
    aws_secret_key: "{{aws_secret_key}}"
    region: "{{product_seeder_s3_region}}"
    bucket: "{{product_seeder_s3_bucket}}"
    object: "{{product_seeder_listings_path}}"
    dest: "{{product_seeder_dir}}/listings.json"
    mode: get

- name: Pull products.json
  s3:
    aws_access_key: "{{aws_access_key}}"
    aws_secret_key: "{{aws_secret_key}}"
    region: "{{product_seeder_s3_region}}"
    bucket: "{{product_seeder_s3_bucket}}"
    object: "{{product_seeder_products_path}}"
    dest: "{{product_seeder_dir}}/products.json"
    mode: get
