---

- name: Remove Old Docker Logs Config
  file: path=/etc/rsyslog.d/51-mesos.conf state=absent

- name: Install New Docker Log Config
  template: >
    src=mesos.conf.j2
    dest=/etc/rsyslog.d/51-mesos.conf
    owner=root
    group=root
    mode=0644

- name: Remove Elasticsearch 5 logging everything
  file: path=/etc/rsyslog.d/52-elastic.conf state=absent
  when: is_appliance

- name: Update Syslog Rotation
  lineinfile: dest="{{logrotate_dir}}/rsyslog" regexp='^daily' line='size=100M'

- name: Restart Rsyslog
  service: name=rsyslog state=restarted enabled=yes
