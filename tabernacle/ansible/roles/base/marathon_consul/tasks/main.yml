---

- name: Add Marathon Consul APT key
  apt_key: url={{marathon_consul_apt_key_url}}

- name: Add Marathon Consul repository
  apt_repository: repo='deb {{marathon_consul_apt_url}} /' state=present update_cache=yes

- name: Install Marathon Consul
  apt: name=marathon-consul state=latest force=yes

- name: Install Marathon Consul config
  template: src=config.json dest={{marathon_consul_config_path}}

- name: Copy Consul Service File
  template: src=marathon-consul.json dest="/etc/consul.d/marathon-consul.json"
