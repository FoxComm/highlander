---

- name: Bootstrap Kafka
  hosts: '{{hostname}}'
  vars:
    user: '{{ansible_ssh_user}}'
  vars_prompt:
    - name: "hostname"
      prompt: "Enter a hostname with a Kafka to bootstrap"
      default: "vanilla-kafka"
      private: no

  roles:
      - { role: dev/kafka }

- name: Bootstrap ES
  hosts: '{{hostname}}'
  vars:
    user: '{{ansible_ssh_user}}'
  vars_prompt:
    - name: "hostname"
      prompt: "Enter a hostname with a Elasticsearch to bootstrap"
      default: "vanilla-es"
      private: no

  roles:
      - { role: dev/elasticsearch }

- name: Bootstrap Green River
  hosts: '{{hostname}}'
  vars:
    user: '{{ansible_ssh_user}}'
  vars_prompt:
    - name: "hostname"
      prompt: "Enter a hostname with a Green River to bootstrap"
      default: "vanilla-greenriver"
      private: no

  roles:
      - { role: prod/bootstrap_greenriver }

- name: Bootstrap Db
  hosts: '{{hostname}}'
  tags:
    - db
  vars:
    user: '{{ansible_ssh_user}}'
    seeds_cmd: utils.seeds.Seeds seed
  vars_prompt:
    - name: "hostname"
      prompt: "Enter a hostname with a database to bootstrap"
      default: "vanilla-db"
      private: no
    - name: "seed_predefined_admins"
      prompt: "Seed predefined admins or create only one manually? P - predefined. M - manually"
      default: "P"
      private: no

  roles:
      - { role: dev/db }
      - { role: prod/bootstrap_manual_or_predefined_admins }
