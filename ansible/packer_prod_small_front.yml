---

- name: Provision Packer Prod Small Front
  hosts: all
  tags:
      - packer-prod-small-front
  vars:
    user: ubuntu
    phoenix_server: "phoenix.service.consul:9090"
    search_host:  elasticsearch.service.consul
    search_server_http: "{{search_host}}:9200"
    ashes_server: 127.0.0.1:4000
    firebird_server: 127.0.0.1:4040
    api_server: 127.0.0.1
    ashes_server_name: admin.smallprod.foxcommerce.com
    firebird_server_name: firebird.smallprod.foxcommerce.com
    firebrand_server_name: smallprod.foxcommerce.com

  roles:
    - { role: base/ssh_keys}
    - { role: base/consul_agent}
    - { role: base/rsyslog, sudo: yes }
    - { role: base/node}
    - { role: base/balancer, sudo: yes }
    - { role: base/ashes}
    - { role: base/firebird}
    - { role: base/firebrand}
    - { role: dev/balancer, sudo: yes }
