---

- name: Create dirs for public keys
  file: path={{ public_keys_dest_dir }} state=directory mode=0700 owner={{user}}
  become: true
  become_user: root
  when: public_keys_dest_dir is defined and install_public_keys

- name: Create dirs for private keys
  file: path={{ private_keys_dest_dir }} state=directory mode=0700 owner={{user}}
  become: true
  become_user: root
  when: private_keys_dest_dir is defined and install_private_keys

- name: Copy public keys
  copyv: src={{item}} dest="{{public_keys_dest_dir}}/{{item}}" mode="600"
  when: public_keys_dest_dir is defined and install_public_keys
  with_items:
      - public_key.der
      - public_key.pem

- name: Copy secret keys
  copyv: src={{item}} dest="{{private_keys_dest_dir}}/{{item}}" mode="600"
  when: private_keys_dest_dir is defined and install_private_keys
  with_items:
      - private_key.der
      - private_key.pem