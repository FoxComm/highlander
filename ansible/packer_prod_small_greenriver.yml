---

- name: Provision Packer Prod Small Greenriver
  hosts: all
  tags:
      - packer-prod-small-greenriver
  vars:
    user: ubuntu
    packing: true
    search_host: elasticsearch.service.consul
    search_server_http: "{{search_host}}:9200"
    search_server: "{{search_host}}:9300"
    log_host: es-log.service.consul
    zookeeper_server: "zookeeper.service.consul:2181"
    schema_server: "schema-registry.service.consul:8081"
    kafka_server: "kafka.service.consul:9092"
    phoenix_server: "phoenix.service.consul:9090"
    greenriver_service_requires: ""
    greenriver_service_after: ""

  roles:
    - { role: base/ssh_keys}
    - { role: base/rsyslog, sudo: yes }
    - { role: base/consul_agent}
    - { role: base/scala}
    - { role: base/greenriver}
