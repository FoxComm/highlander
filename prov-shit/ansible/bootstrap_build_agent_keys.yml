---

- name: Upload Keys to Agent Machines
  hosts:
    - buildkite-agent-0
    - buildkite-agent-1
    - buildkite-agent-2
    - buildkite-agent-3
    - buildkite-agent-4
    - buildkite-agent-5
    - buildkite-agent-6
    - buildkite-agent-7
  tags:
    - buildkite-agent
  vars:
    user: "{{ ansible_user | default(lookup('env', 'USER')) }}"
    agent_home: /var/lib/buildkite-agent
  vars_prompt:
    - name: "account_json_src"
      prompt: "Enter a local path to gcloud account.json"
      default: "~/FoxComm/highlander/prov-shit/account.json"
      private: no
    - name: "vault_pass_src"
      prompt: "Enter a local path to .vault_pass"
      default: "~/FoxComm/highlander/prov-shit/.vault_pass"
      private: no

  roles:
    - { role: dev/builder_keys }
