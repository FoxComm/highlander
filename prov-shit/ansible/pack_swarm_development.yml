---

- name: Packing Swarm Development Image
  hosts: all
  vars:
    user: ubuntu
  gather_facts: no

  pre_tasks:
    - name: Install Python 2 and Boto
      apt: name={{item}} state=latest force=yes
      sudo: true
      with_items:
        - python2.7
        - python-boto
    - name: Gather Facts
      setup:

  sudo: true
  roles:
    # base roles
    - { role: swarm/pack/base }
    - { role: swarm/pack/java }
    - { role: swarm/pack/mesos/base }
    - { role: swarm/pack/docker }
    - { role: swarm/pack/consul/base }
    # master roles
    - { role: swarm/pack/confluence }
    - { role: swarm/pack/mesos/master }
    - { role: swarm/pack/zookeeper }
    - { role: swarm/pack/marathon }
    - { role: swarm/pack/consul/server }
    # worker roles
    - { role: swarm/pack/mesos/worker }
    - { role: swarm/pack/consul/agent }
