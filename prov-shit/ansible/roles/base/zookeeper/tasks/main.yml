---

- name: Setup Zookeeper Dir
  file: path=/var/lib/zookeeper state=directory
  pause: seconds=5

- name: Setup Zookeeper config
  template: src=zookeeper.properties dest="/etc/kafka/zookeeper.properties"
  pause: seconds=5

- name: Copy Zookeeper Service Files
  copy: src=zookeeper.service dest={{dest_services}}/zookeeper.service
  pause: seconds=5

- name: Reload Systemd for Kafka Related Services
  pause: seconds=5
  command: systemctl daemon-reload

- name: Start Zookeeper
  service: name=zookeeper state=started enabled=yes
  pause: seconds=5

- name: Copy Consul Service File
  template: src=zookeeper.json dest="/etc/consul.d/zookeeper.json"
  pause: seconds=5
