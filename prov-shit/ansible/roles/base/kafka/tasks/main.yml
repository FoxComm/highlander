---
- name: Copy Kafka Config File
  template: src=server.properties dest=/etc/kafka/server.properties
  become: true

- name: Copy Kafka Service Files
  copy: src=kafka.service dest={{dest_services}}/kafka.service
  become: true

- name: Reload Systemd for Kafka Related Services
  become: true
  command: systemctl daemon-reload

- name: Create Kafka dir
  file: path=/var/lib/kafka state=directory
  become: true

- name: Start Kafka
  service: name=kafka state=started enabled=yes
  become: true

- name: Copy Consul Service File
  template: src=kafka.json dest="/etc/consul.d/kafka.json"
  become: true
