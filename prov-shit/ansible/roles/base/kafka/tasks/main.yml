---
- name: Copy Kafka Config File
  template: src=server.properties dest=/etc/kafka/server.properties
  pause: seconds=5

- name: Copy Kafka Service Files
  copy: src=kafka.service dest={{dest_services}}/kafka.service
  pause: seconds=5

- name: Reload Systemd for Kafka Related Services
  pause: seconds=5
  command: systemctl daemon-reload

- name: Create Kafka dir
  file: path=/var/lib/kafka state=directory
  pause: seconds=5

- name: Start Kafka
  service: name=kafka state=started enabled=yes
  pause: seconds=5

- name: Copy Consul Service File
  template: src=kafka.json dest="/etc/consul.d/kafka.json"
  pause: seconds=5
