---

- name: Bootstrap Kafka
  hosts: '{{hostname}}'
  vars:
    user: '{{ansible_ssh_user}}'
    zookeeper_server: "zookeeper.service.consul:2181"
  vars_prompt:
    - name: "hostname"
      prompt: "Enter a hostname with a Kafka to bootstrap"
      default: "vanilla-kafka"
      private: no

  roles:
      - { role: dev/kafka }

- name: Bootstrap ES
  hosts: '{{hostname}}'
  vars:
    user: '{{ansible_ssh_user}}'
  vars_prompt:
    - name: "hostname"
      prompt: "Enter a hostname with a Elasticsearch to bootstrap"
      default: "vanilla-es"
      private: no

  roles:
      - { role: dev/elasticsearch }

- name: Bootstrap Green River
  hosts: '{{hostname}}'
  vars:
    user: '{{ansible_ssh_user}}'
  vars_prompt:
    - name: "hostname"
      prompt: "Enter a hostname with a Green River to bootstrap"
      default: "vanilla-greenriver"
      private: no

  roles:
      - { role: prod/bootstrap_greenriver }

- name: Bootstrap Db
  hosts: '{{hostname}}'
  tags:
    - db
  vars:
    user: '{{ansible_ssh_user}}'
    seeds_cmd: -Ddb.name={{db_name}} utils.seeds.Seeds
    db_name: '{{phoenix_db_name}}'
  vars_prompt:
    - name: "hostname"
      prompt: "Enter a hostname with a database to bootstrap"
      default: "vanilla-db"
      private: no
    - name: "phoenix_db_name"
      prompt: "Enter the name of the database"
      default: "phoenix"
      private: no

  roles:
      - { role: dev/db }
