---

- name: Provision TPG Production Backend
  hosts: tpg-backend
  vars:
    user: '{{ansible_ssh_user}}'
    middlewarehouse_server: middlewarehouse.service.consul:9292
    kafka_server: kafka.service.consul:9092
    schema_server: schema-registry.service.consul:8081
    zookeeper_server: zookeeper.service.consul:2181
    upload_phoenix_jar: true
    upload_greenriver_jar: true
  roles:
    - { role: dev/phoenix }
    - { role: dev/greenriver }
    - { role: prod/db_migrate }
