---

- name: Bootstrap Messaging Plugin
  hosts: '{{hostname}}'
  vars:
    user: '{{ansible_ssh_user}}'
    schema_server: schema-registry.service.consul:8081
    kafka_server: kafka.service.consul:9092
    api_server: balancer.service.consul
  vars_prompt:
    - name: "hostname"
      prompt: "Enter a hostname where to install messaging service"
      private: no
    - name: "ashes_server_name"
      prompt: "Enter ashes server name"
      default: "admin.foxcommerce.local"
      private: no
    - name: "plugins_api_user_email"
      prompt: "Enter phoenix api user email"
      private: no
    - name: "plugins_api_user_password"
      prompt: "Enter phoenix api password email"
      private: no
    - name: "self_host"
      prompt: "Enter plugin host which will be accessible from api server"
      private: no
  roles:
      - { role: dev/messaging, sudo: true }
