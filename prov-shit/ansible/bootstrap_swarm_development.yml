---

- include: bootstrap_swarm_wait_ssh.yml

- name: Provisioning Swarm Master
  hosts: all
  vars:
    user: ubuntu

  sudo: true
  roles:
    # master roles
    - { role: swarm/provision/consul/server }
    - { role: swarm/provision/zookeeper }
    - { role: swarm/provision/mesos/master }
    - { role: swarm/provision/marathon }
    # worker roles
    - { role: swarm/provision/mesos/worker }
    # reload consul
    - { role: swarm/provision/consul/reload }
