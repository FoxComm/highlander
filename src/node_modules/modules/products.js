/* @flow */

import { createReducer } from 'redux-act';
import createAsyncActions from './async-utils';
import { elastic } from 'lib/api';

export type Product = {
  id: number;
  context: string,
  title: string;
  description: string,
  images: Array<string>,
}

function apiCall(categoryId: ?number): global.Promise {
  console.log(`Trying to query categoryId ${categoryId}`);
  return elastic.get('/search/products_catalog_view/_search');
}

const {fetch, ...actions} = createAsyncActions('products', apiCall);

const reducer = createReducer({
  [actions.fetchSucceeded]: (state, payload) => {
    return {
      ...state,
      list: payload.result,
    };
  },
}, {list: []});

export {
  reducer as default,
  fetch,
};
